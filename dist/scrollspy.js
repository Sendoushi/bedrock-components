!function(t,e){"use strict";function r(){this.__data__=[],this.size=0}function n(t,e){return t===e||t!==t&&e!==e}function o(t,e){for(var r=t.length;r--;)if(oe(t[r][0],e))return r;return-1}function i(t){var e=this.__data__,r=ie(e,t);return!(r<0)&&(r==e.length-1?e.pop():ue.call(e,r,1),--this.size,!0)}function c(t){var e=this.__data__,r=ie(e,t);return r<0?void 0:e[r][1]}function u(t){return ie(this.__data__,t)>-1}function a(t,e){var r=this.__data__,n=ie(r,t);return n<0?(++this.size,r.push([t,e])):r[n][1]=e,this}function s(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function l(){this.__data__=new pe,this.size=0}function f(t){var e=this.__data__,r=e.delete(t);return this.size=e.size,r}function p(t){return this.__data__.get(t)}function h(t){return this.__data__.has(t)}function b(t,e){return e={exports:{}},t(e,e.exports),e.exports}function y(t){var e=ke.call(t,Pe),r=t[Pe];try{t[Pe]=void 0}catch(t){}var n=He.call(t);return e?t[Pe]=r:delete t[Pe],n}function d(t){return Ce.call(t)}function v(t){return null==t?void 0===t?Fe:ze:Ie&&Ie in Object(t)?Se(t):xe(t)}function _(t){var e=void 0===t?"undefined":babelHelpers.typeof(t);return null!=t&&("object"==e||"function"==e)}function j(t){if(!Ue(t))return!1;var e=Me(t);return e==De||e==Be||e==Ee||e==Re}function g(t){return!!We&&We in t}function m(t){if(null!=t){try{return Je.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function w(t){return!(!Ue(t)||Ne(t))&&(Ge(t)?er:Qe).test(Ke(t))}function O(t,e){return null==t?void 0:t[e]}function A(t,e){var r=nr(t,e);return rr(r)?r:void 0}function T(){this.__data__=ar?ar(null):{},this.size=0}function k(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}function H(t){var e=this.__data__;if(ar){var r=e[t];return r===fr?void 0:r}return hr.call(e,t)?e[t]:void 0}function P(t){var e=this.__data__;return ar?void 0!==e[t]:dr.call(e,t)}function S(t,e){var r=this.__data__;return this.size+=this.has(t)?0:1,r[t]=ar&&void 0===e?_r:e,this}function $(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function C(){this.size=0,this.__data__={hash:new gr,map:new(cr||pe),string:new gr}}function x(t){var e=void 0===t?"undefined":babelHelpers.typeof(t);return"string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t}function z(t,e){var r=t.__data__;return wr(e)?r["string"==typeof e?"string":"hash"]:r.map}function F(t){var e=Or(this,t).delete(t);return this.size-=e?1:0,e}function I(t){return Or(this,t).get(t)}function M(t){return Or(this,t).has(t)}function U(t,e){var r=Or(this,t),n=r.size;return r.set(t,e),this.size+=r.size==n?0:1,this}function E(t){var e=-1,r=null==t?0:t.length;for(this.clear();++e<r;){var n=t[e];this.set(n[0],n[1])}}function D(t,e){var r=this.__data__;if(r instanceof pe){var n=r.__data__;if(!cr||n.length<Sr-1)return n.push([t,e]),this.size=++r.size,this;r=this.__data__=new Pr(n)}return r.set(t,e),this.size=r.size,this}function B(t){var e=this.__data__=new pe(t);this.size=e.size}function R(t,e){for(var r=-1,n=null==t?0:t.length;++r<n&&e(t[r],r,t)!==!1;);return t}function G(t,e,r){"__proto__"==e&&Fr?Fr(t,e,{configurable:!0,enumerable:!0,value:r,writable:!0}):t[e]=r}function V(t,e,r){var n=t[e];Ur.call(t,e)&&oe(n,r)&&(void 0!==r||e in t)||Ir(t,e,r)}function L(t,e,r,n){var o=!r;r||(r={});for(var i=-1,c=e.length;++i<c;){var u=e[i],a=n?n(r[u],t[u],u,r,t):void 0;void 0===a&&(a=t[u]),o?Ir(r,u,a):Er(r,u,a)}return r}function W(t,e){for(var r=-1,n=Array(t);++r<t;)n[r]=e(r);return n}function N(t){return null!=t&&"object"==(void 0===t?"undefined":babelHelpers.typeof(t))}function q(t){return Rr(t)&&Me(t)==Gr}function J(){return!1}function K(t,e){return!!(e=null==e?Zr:e)&&("number"==typeof t||tn.test(t))&&t>-1&&t%1==0&&t<e}function Q(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=rn}function X(t){return Rr(t)&&nn(t.length)&&!!on[Me(t)]}function Y(t){return function(e){return t(e)}}function Z(t,e){var r=Qr(t),n=!r&&Jr(t),o=!r&&!n&&Yr(t),i=!r&&!n&&!o&&fn(t),c=r||n||o||i,u=c?Br(t.length,String):[],a=u.length;for(var s in t)!e&&!hn.call(t,s)||c&&("length"==s||o&&("offset"==s||"parent"==s)||i&&("buffer"==s||"byteLength"==s||"byteOffset"==s)||en(s,a))||u.push(s);return u}function tt(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||yn)}function et(t,e){return function(r){return t(e(r))}}function rt(t){if(!dn(t))return jn(t);var e=[];for(var r in Object(t))mn.call(t,r)&&"constructor"!=r&&e.push(r);return e}function nt(t){return null!=t&&nn(t.length)&&!Ge(t)}function ot(t){return On(t)?bn(t):wn(t)}function it(t,e){return t&&Dr(e,An(e),t)}function ct(t){var e=[];if(null!=t)for(var r in Object(t))e.push(r);return e}function ut(t){if(!Ue(t))return kn(t);var e=dn(t),r=[];for(var n in t)("constructor"!=n||!e&&Pn.call(t,n))&&r.push(n);return r}function at(t){return On(t)?bn(t,!0):Sn(t)}function st(t,e){return t&&Dr(e,$n(e),t)}function lt(t,e){var r=-1,n=t.length;for(e||(e=Array(n));++r<n;)e[r]=t[r];return e}function ft(t,e){for(var r=-1,n=null==t?0:t.length,o=0,i=[];++r<n;){var c=t[r];e(c,r,t)&&(i[o++]=c)}return i}function pt(){return[]}function ht(t,e){return Dr(t,Bn(t),e)}function bt(t,e){for(var r=-1,n=e.length,o=t.length;++r<n;)t[o+r]=e[r];return t}function yt(t,e){return Dr(t,qn(t),e)}function dt(t,e,r){var n=e(t);return Qr(t)?n:Gn(n,r(t))}function vt(t){return Kn(t,An,Bn)}function _t(t){return Kn(t,$n,qn)}function jt(t){var e=t.length,r=t.constructor(e);return e&&"string"==typeof t[0]&&bo.call(t,"index")&&(r.index=t.index,r.input=t.input),r}function gt(t){var e=new t.constructor(t.byteLength);return new _o(e).set(new _o(t)),e}function mt(t,e){var r=e?jo(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.byteLength)}function wt(t,e){return t.set(e[0],e[1]),t}function Ot(t,e,r,n){var o=-1,i=null==t?0:t.length;for(n&&i&&(r=t[++o]);++o<i;)r=e(r,t[o],o,t);return r}function At(t){var e=-1,r=Array(t.size);return t.forEach(function(t,n){r[++e]=[n,t]}),r}function Tt(t,e,r){var n=e?r(Oo(t),Ao):Oo(t);return wo(n,mo,new t.constructor)}function kt(t){var e=new t.constructor(t.source,ko.exec(t));return e.lastIndex=t.lastIndex,e}function Ht(t,e){return t.add(e),t}function Pt(t){var e=-1,r=Array(t.size);return t.forEach(function(t){r[++e]=t}),r}function St(t,e,r){var n=e?r(So(t),$o):So(t);return wo(n,Po,new t.constructor)}function $t(t){return zo?Object(zo.call(t)):{}}function Ct(t,e){var r=e?jo(t.buffer):t.buffer;return new t.constructor(r,t.byteOffset,t.length)}function xt(t,e,r,n){var o=t.constructor;switch(e){case Lo:return jo(t);case Mo:case Uo:return new o(+t);case Wo:return go(t,n);case No:case qo:case Jo:case Ko:case Qo:case Xo:case Yo:case Zo:case ti:return Io(t,n);case Eo:return To(t,n,r);case Do:case Go:return new o(t);case Bo:return Ho(t);case Ro:return Co(t,n,r);case Vo:return Fo(t)}}function zt(t){return"function"!=typeof t.constructor||dn(t)?{}:oi(Ln(t))}function Ft(t,e,r,n,o,i){var c,u=e&ci,a=e&ui,s=e&ai;if(r&&(c=o?r(t,n,o,i):r(t)),void 0!==c)return c;if(!Ue(t))return t;var l=Qr(t);if(l){if(c=yo(t),!u)return zn(t,c)}else{var f=po(t),p=f==li||f==fi;if(Yr(t))return xn(t,u);if(f==pi||f==si||p&&!o){if(c=a||p?{}:ii(t),!u)return a?Jn(t,Cn(c,t)):Rn(t,Tn(c,t))}else{if(!hi[f])return o?t:{};c=ei(t,f,Ft,u)}}i||(i=new Cr);var h=i.get(t);if(h)return h;i.set(t,c);var b=s?a?Xn:Qn:a?keysIn:An,y=l?void 0:b(t);return xr(y||t,function(n,o){y&&(o=n,n=t[o]),Er(c,o,Ft(n,e,r,o,t,i))}),c}function It(t){return bi(t,yi|di)}function Mt(t,e,r){(void 0===r||oe(t[e],r))&&(void 0!==r||e in t)||Ir(t,e,r)}function Ut(t){return function(e,r,n){for(var o=-1,i=Object(e),c=n(e),u=c.length;u--;){var a=c[t?u:++o];if(r(i[a],a,i)===!1)break}return e}}function Et(t){return Rr(t)&&On(t)}function Dt(t){if(!Rr(t)||Me(t)!=Oi)return!1;var e=Ln(t);if(null===e)return!0;var r=Hi.call(e,"constructor")&&e.constructor;return"function"==typeof r&&r instanceof r&&ki.call(r)==Pi}function Bt(t){return Dr(t,$n(t))}function Rt(t,e,r,n,o,i,c){var u=t[r],a=e[r],s=c.get(a);if(s)return void _i(t,r,s);var l=i?i(u,a,r+"",t,e,c):void 0,f=void 0===l;if(f){var p=Qr(a),h=!p&&Yr(a),b=!p&&!h&&fn(a);l=a,p||h||b?Qr(u)?l=u:wi(u)?l=zn(u):h?(f=!1,l=xn(a,!0)):b?(f=!1,l=Io(a,!0)):l=[]:Si(a)||Jr(a)?(l=u,Jr(u)?l=$i(u):(!Ue(u)||n&&Ge(u))&&(l=ii(a))):f=!1}f&&(c.set(a,l),o(l,a,n,i,c),c.delete(a)),_i(t,r,l)}function Gt(t,e,r,n,o){t!==e&&mi(e,function(i,c){if(Ue(i))o||(o=new Cr),Ci(t,e,c,r,Gt,n,o);else{var u=n?n(t[c],i,c+"",t,e,o):void 0;void 0===u&&(u=i),_i(t,c,u)}},$n)}function Vt(t){return t}function Lt(t,e,r){switch(r.length){case 0:return t.call(e);case 1:return t.call(e,r[0]);case 2:return t.call(e,r[0],r[1]);case 3:return t.call(e,r[0],r[1],r[2])}return t.apply(e,r)}function Wt(t,e,r){return e=Ii(void 0===e?t.length-1:e,0),function(){for(var n=arguments,o=-1,i=Ii(n.length-e,0),c=Array(i);++o<i;)c[o]=n[e+o];o=-1;for(var u=Array(e+1);++o<e;)u[o]=n[o];return u[e]=r(c),Fi(t,this,u)}}function Nt(t){return function(){return t}}function qt(t){var e=0,r=0;return function(){var n=Gi(),o=Ri-(n-r);if(r=n,o>0){if(++e>=Bi)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function Jt(t,e){return Wi(Mi(t,e,zi),t+"")}function Kt(t,e,r){if(!Ue(r))return!1;var n=void 0===e?"undefined":babelHelpers.typeof(e);return!!("number"==n?On(r)&&en(e,r.length):"string"==n&&e in r)&&oe(r[e],t)}function Qt(t){return Ni(function(e,r){var n=-1,o=r.length,i=o>1?r[o-1]:void 0,c=o>2?r[2]:void 0;for(i=t.length>3&&"function"==typeof i?(o--,i):void 0,c&&qi(r[0],r[1],c)&&(i=o<3?void 0:i,o=1),e=Object(e);++n<o;){var u=r[n];u&&t(e,u,n,i)}return e})}e="default"in e?e.default:e;var Xt={},Yt=function(t,e,r){if("function"==typeof e&&(r=e,e=""+1e5*Math.random()),!t&&"function"!=typeof t)throw new Error("A message handler is needed!");if(!r&&"function"!=typeof r)throw new Error("A listener function is needed!");var n=Xt[t]||[];return n.push({id:e,listener:r}),Xt[t]=n,e},Zt=function(t,e){if(t&&Xt[t])return e?void(Xt[t]=Xt[t].filter(function(t){return t.id!==e})):void(Xt[t]=void 0)},te=function(t,e){var r=Xt[t];if(r)for(var n=0;n<r.length;n+=1)r[n].listener(e)},ee=function(){Xt={}},re={on:Yt,off:Zt,send:te,reset:ee},ne=r,oe=n,ie=o,ce=Array.prototype,ue=ce.splice,ae=i,se=c,le=u,fe=a;s.prototype.clear=ne,s.prototype.delete=ae,s.prototype.get=se,s.prototype.has=le,s.prototype.set=fe;var pe=s,he=l,be=f,ye=p,de=h,ve="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},_e="object"==babelHelpers.typeof(ve)&&ve&&ve.Object===Object&&ve,je=_e,ge="object"==("undefined"==typeof self?"undefined":babelHelpers.typeof(self))&&self&&self.Object===Object&&self,me=je||ge||Function("return this")(),we=me,Oe=we.Symbol,Ae=Oe,Te=Object.prototype,ke=Te.hasOwnProperty,He=Te.toString,Pe=Ae?Ae.toStringTag:void 0,Se=y,$e=Object.prototype,Ce=$e.toString,xe=d,ze="[object Null]",Fe="[object Undefined]",Ie=Ae?Ae.toStringTag:void 0,Me=v,Ue=_,Ee="[object AsyncFunction]",De="[object Function]",Be="[object GeneratorFunction]",Re="[object Proxy]",Ge=j,Ve=we["__core-js_shared__"],Le=Ve,We=function(){var t=/[^.]+$/.exec(Le&&Le.keys&&Le.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}(),Ne=g,qe=Function.prototype,Je=qe.toString,Ke=m,Qe=/^\[object .+?Constructor\]$/,Xe=Function.prototype,Ye=Object.prototype,Ze=Xe.toString,tr=Ye.hasOwnProperty,er=RegExp("^"+Ze.call(tr).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),rr=w,nr=O,or=A,ir=or(we,"Map"),cr=ir,ur=or(Object,"create"),ar=ur,sr=T,lr=k,fr="__lodash_hash_undefined__",pr=Object.prototype,hr=pr.hasOwnProperty,br=H,yr=Object.prototype,dr=yr.hasOwnProperty,vr=P,_r="__lodash_hash_undefined__",jr=S;$.prototype.clear=sr,$.prototype.delete=lr,$.prototype.get=br,$.prototype.has=vr,$.prototype.set=jr;var gr=$,mr=C,wr=x,Or=z,Ar=F,Tr=I,kr=M,Hr=U;E.prototype.clear=mr,E.prototype.delete=Ar,E.prototype.get=Tr,E.prototype.has=kr,E.prototype.set=Hr;var Pr=E,Sr=200,$r=D;B.prototype.clear=he,B.prototype.delete=be,B.prototype.get=ye,B.prototype.has=de,B.prototype.set=$r;var Cr=B,xr=R,zr=function(){try{var t=or(Object,"defineProperty");return t({},"",{}),t}catch(t){}}(),Fr=zr,Ir=G,Mr=Object.prototype,Ur=Mr.hasOwnProperty,Er=V,Dr=L,Br=W,Rr=N,Gr="[object Arguments]",Vr=q,Lr=Object.prototype,Wr=Lr.hasOwnProperty,Nr=Lr.propertyIsEnumerable,qr=Vr(function(){return arguments}())?Vr:function(t){return Rr(t)&&Wr.call(t,"callee")&&!Nr.call(t,"callee")},Jr=qr,Kr=Array.isArray,Qr=Kr,Xr=J,Yr=b(function(t,e){var r=e&&!e.nodeType&&e,n=r&&!0&&t&&!t.nodeType&&t,o=n&&n.exports===r,i=o?we.Buffer:void 0,c=i?i.isBuffer:void 0,u=c||Xr;t.exports=u}),Zr=9007199254740991,tn=/^(?:0|[1-9]\d*)$/,en=K,rn=9007199254740991,nn=Q,on={};on["[object Float32Array]"]=on["[object Float64Array]"]=on["[object Int8Array]"]=on["[object Int16Array]"]=on["[object Int32Array]"]=on["[object Uint8Array]"]=on["[object Uint8ClampedArray]"]=on["[object Uint16Array]"]=on["[object Uint32Array]"]=!0,on["[object Arguments]"]=on["[object Array]"]=on["[object ArrayBuffer]"]=on["[object Boolean]"]=on["[object DataView]"]=on["[object Date]"]=on["[object Error]"]=on["[object Function]"]=on["[object Map]"]=on["[object Number]"]=on["[object Object]"]=on["[object RegExp]"]=on["[object Set]"]=on["[object String]"]=on["[object WeakMap]"]=!1;var cn=X,un=Y,an=b(function(t,e){var r=e&&!e.nodeType&&e,n=r&&!0&&t&&!t.nodeType&&t,o=n&&n.exports===r,i=o&&je.process,c=function(){try{return i&&i.binding&&i.binding("util")}catch(t){}}();t.exports=c}),sn=an&&an.isTypedArray,ln=sn?un(sn):cn,fn=ln,pn=Object.prototype,hn=pn.hasOwnProperty,bn=Z,yn=Object.prototype,dn=tt,vn=et,_n=vn(Object.keys,Object),jn=_n,gn=Object.prototype,mn=gn.hasOwnProperty,wn=rt,On=nt,An=ot,Tn=it,kn=ct,Hn=Object.prototype,Pn=Hn.hasOwnProperty,Sn=ut,$n=at,Cn=st,xn=b(function(t,e){function r(t,e){if(e)return t.slice();var r=t.length,n=u?u(r):new t.constructor(r);return t.copy(n),n}var n=e&&!e.nodeType&&e,o=n&&!0&&t&&!t.nodeType&&t,i=o&&o.exports===n,c=i?we.Buffer:void 0,u=c?c.allocUnsafe:void 0;t.exports=r}),zn=lt,Fn=ft,In=pt,Mn=Object.prototype,Un=Mn.propertyIsEnumerable,En=Object.getOwnPropertySymbols,Dn=En?function(t){return null==t?[]:(t=Object(t),Fn(En(t),function(e){return Un.call(t,e)}))}:In,Bn=Dn,Rn=ht,Gn=bt,Vn=vn(Object.getPrototypeOf,Object),Ln=Vn,Wn=Object.getOwnPropertySymbols,Nn=Wn?function(t){for(var e=[];t;)Gn(e,Bn(t)),t=Ln(t);return e}:In,qn=Nn,Jn=yt,Kn=dt,Qn=vt,Xn=_t,Yn=or(we,"DataView"),Zn=Yn,to=or(we,"Promise"),eo=to,ro=or(we,"Set"),no=ro,oo=or(we,"WeakMap"),io=oo,co=Ke(Zn),uo=Ke(cr),ao=Ke(eo),so=Ke(no),lo=Ke(io),fo=Me;(Zn&&"[object DataView]"!=fo(new Zn(new ArrayBuffer(1)))||cr&&"[object Map]"!=fo(new cr)||eo&&"[object Promise]"!=fo(eo.resolve())||no&&"[object Set]"!=fo(new no)||io&&"[object WeakMap]"!=fo(new io))&&(fo=function(t){var e=Me(t),r="[object Object]"==e?t.constructor:void 0,n=r?Ke(r):"";if(n)switch(n){case co:return"[object DataView]";case uo:return"[object Map]";case ao:return"[object Promise]";case so:return"[object Set]";case lo:return"[object WeakMap]"}return e});var po=fo,ho=Object.prototype,bo=ho.hasOwnProperty,yo=jt,vo=we.Uint8Array,_o=vo,jo=gt,go=mt,mo=wt,wo=Ot,Oo=At,Ao=1,To=Tt,ko=/\w*$/,Ho=kt,Po=Ht,So=Pt,$o=1,Co=St,xo=Ae?Ae.prototype:void 0,zo=xo?xo.valueOf:void 0,Fo=$t,Io=Ct,Mo="[object Boolean]",Uo="[object Date]",Eo="[object Map]",Do="[object Number]",Bo="[object RegExp]",Ro="[object Set]",Go="[object String]",Vo="[object Symbol]",Lo="[object ArrayBuffer]",Wo="[object DataView]",No="[object Float32Array]",qo="[object Float64Array]",Jo="[object Int8Array]",Ko="[object Int16Array]",Qo="[object Int32Array]",Xo="[object Uint8Array]",Yo="[object Uint8ClampedArray]",Zo="[object Uint16Array]",ti="[object Uint32Array]",ei=xt,ri=Object.create,ni=function(){function t(){}return function(e){if(!Ue(e))return{};if(ri)return ri(e);t.prototype=e;var r=new t;return t.prototype=void 0,r}}(),oi=ni,ii=zt,ci=1,ui=2,ai=4,si="[object Arguments]",li="[object Function]",fi="[object GeneratorFunction]",pi="[object Object]",hi={};hi[si]=hi["[object Array]"]=hi["[object ArrayBuffer]"]=hi["[object DataView]"]=hi["[object Boolean]"]=hi["[object Date]"]=hi["[object Float32Array]"]=hi["[object Float64Array]"]=hi["[object Int8Array]"]=hi["[object Int16Array]"]=hi["[object Int32Array]"]=hi["[object Map]"]=hi["[object Number]"]=hi[pi]=hi["[object RegExp]"]=hi["[object Set]"]=hi["[object String]"]=hi["[object Symbol]"]=hi["[object Uint8Array]"]=hi["[object Uint8ClampedArray]"]=hi["[object Uint16Array]"]=hi["[object Uint32Array]"]=!0,hi["[object Error]"]=hi[li]=hi["[object WeakMap]"]=!1;var bi=Ft,yi=1,di=4,vi=It,_i=Mt,ji=Ut,gi=ji(),mi=gi,wi=Et,Oi="[object Object]",Ai=Function.prototype,Ti=Object.prototype,ki=Ai.toString,Hi=Ti.hasOwnProperty,Pi=ki.call(Object),Si=Dt,$i=Bt,Ci=Rt,xi=Gt,zi=Vt,Fi=Lt,Ii=Math.max,Mi=Wt,Ui=Nt,Ei=Fr?function(t,e){return Fr(t,"toString",{configurable:!0,enumerable:!1,value:Ui(e),writable:!0})}:zi,Di=Ei,Bi=800,Ri=16,Gi=Date.now,Vi=qt,Li=Vi(Di),Wi=Li,Ni=Jt,qi=Kt,Ji=Qt,Ki=Ji(function(t,e,r){xi(t,e,r)}),Qi=Ki,Xi=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,t),this._comps=e.comps||this._comps||{},this.state=e.state||{}}return babelHelpers.createClass(t,[{key:"destroy",value:function(){for(var t=Object.keys(this._comps),e=0;e<t.length;e+=1)this._comps[t[e]]&&this._comps[t[e]].destroy&&(this._comps[t[e]].destroy(),this._comps[t[e]]=null);return this}},{key:"state",set:function(t){this._state=Qi(this._state||{},vi(t))},get:function(){return this._state}}]),t}(),Yi=function(t){var e=void 0;if("string"==typeof t)e=function(){return"string"==typeof t?t:""};else{if("function"!=typeof t)throw new Error("Template needs to be a string or a function");e=t}return e},Zi=function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments[3],o=e(r);if(o!==n||void 0!==t)return o;if(void 0!==t)for(var i=0;i<t.length;i+=1)t[i].innerHTML=o;return o},tc=function(t){if(void 0!==t&&null!==t)for(var e=0;e<t.length;e+=1)t[e].innerHTML=""},ec=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};babelHelpers.classCallCheck(this,e);var n=babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,{comps:r.comps,state:r.state}));return n._el=t,n._els=r.els||n._els||{},n._render=r.render||n._render||!1,n.tmpl=r.tmpl,n}return babelHelpers.inherits(e,t),babelHelpers.createClass(e,[{key:"render",value:function(){return this._render===!1?this:(this._renderedTmpl=Zi(this._el,this._tmpl,this.state,this._renderedTmpl),this)}},{key:"destroy",value:function(){return this._render&&tc(this._el),babelHelpers.get(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"destroy",this).call(this),this}},{key:"tmpl",set:function(t){this._tmpl=Yi(t)},get:function(){return this._tmpl}}]),e}(Xi),rc=function(t){var e=[];if(void 0!==t&&null!==t)for(var r=0;r<t.length;r+=1)e.push(t[r]);if(e.length)return e},nc=function(t){for(var e={},r=Object.keys(t),n=0;n<r.length;n+=1)e[r[n]]=rc(t[r[n]]);return e},oc=function(t){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};babelHelpers.classCallCheck(this,e);var n=r.els||{},o=nc(n),i=rc(t),c=babelHelpers.possibleConstructorReturn(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,i,{els:o,tmpl:r.tmpl,render:r.render,comps:r.comps,state:r.state}));return c._$el=t,c._$els=n,c}return babelHelpers.inherits(e,t),e}(ec),ic=function(t){function r(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};babelHelpers.classCallCheck(this,r),t=t instanceof e?t:e(t);var o=babelHelpers.possibleConstructorReturn(this,(r.__proto__||Object.getPrototypeOf(r)).call(this,t,{noRender:!0,tmpl:""}));return o._data={headGutter:n.headGutter||100,gutter:n.gutter||100,bottomGutter:n.bottomGutter||100,throttle:n.throttle||50},o._$els.items=n.$els.items||[],o._$els.offset=n.$els.offset||[],o._scrollToCurrent(),e(window).on("scroll.scrollspy",function(){o._throttler&&clearTimeout(o._throttler),o._throttler=setTimeout(function(){return window.requestAnimationFrame(o._onScroll.bind(o))},o._data.throttle)}),o._mbId=re.on("scrollspy.target",o._scrollToTarget.bind(o)),o}return babelHelpers.inherits(r,t),babelHelpers.createClass(r,[{key:"destroy",value:function(){return this._animThrottle&&clearTimeout(this._animThrottle),this._throttler&&clearTimeout(this._throttler),e(window).off("scroll.scrollspy"),re.off("scrollspy.target",this._mbId),babelHelpers.get(r.prototype.__proto__||Object.getPrototypeOf(r.prototype),"destroy",this).call(this),this}},{key:"_onScroll",value:function(){var t=this._$els.offset?this._$els.offset.height():0,r=e(window).scrollTop(),n=e(window)[0].innerHeight,o=document.body.scrollHeight,i=r+t,c=[];if(this._$els.items.each(function(t,r){var n=e(r).offset().top;c.push({top:n,el:r})}),c.length){var u=c.reduce(function(t,e){var r=i-t.top,n=i-e.top;return r=r<0?r*-1:r,n=n<0?n*-1:r,r<n?t:e});e(u.el).trigger("scrollspy.hit"),re.send("scrollspy.hit",u.el),n+r+this._data.bottomGutter>=o?re.send("scrollspy.hitbottom"):r<=this._data.headGutter&&re.send("scrollspy.hittop")}}},{key:"_scrollToTarget",value:function(t,r){var n=this._$els.items.filter(t),o=void 0;n&&n.length&&(o=this._$els.offset?"object"===babelHelpers.typeof(this._$els.offset)?n.offset().top-this._$els.offset.height():n.offset().top-this._$els.offset:n.offset().top,e("html, body").finish().animate({scrollTop:o},500),r!==!0&&(this._animThrottle&&clearTimeout(this._animThrottle),this._animThrottle=setTimeout(this._scrollToTarget.bind(this,t,!0),250)))}},{key:"_scrollToCurrent",value:function(t){var e=window.location.hash;if(!/^#[^ ]+$/.test(e))return!1;t&&t.preventDefault(),this._scrollToTarget("#"+e.slice(1),!0)}}]),r}(oc);t.Component=ic}(this.bedrockCompscrollspy=this.bedrockCompscrollspy||{},$);
